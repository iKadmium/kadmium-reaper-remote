<h2 *ngIf="!set">Loading...</h2>
<div class="row">
	<div class="col">
		<form *ngIf="set">
			<fieldset [disabled]="busy">
				<div class="form-group">
					<label class="control-label col-sm-2" for="date">Date</label>
					<div class="col-sm-10">
						<input class="form-control" type="date" name="date" [(ngModel)]="set.humanDate">
					</div>
				</div>
				<div class="form-group">
					<label class="control-label col-sm-2" for="venue">Venue</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" name="venue" [(ngModel)]="set.venue">
					</div>
				</div>
				<div class="col-sm-12">
					<h1 class="d-none d-sm-block">Length: {{set.durationFormatted}}</h1>
					<h1 class="d-sm-none text-center">{{set.durationFormatted}}</h1>
				</div>

				<div class="row ml-0 mr-0">
					<div class="col-md-4" *ngFor="let song of set.songs; let i=index">
						<div class="card card-margin">
							<div class="card-body">
								<h5 class="card-title">{{i + 1}} - {{song.name}}</h5>
								<div class="form-group">
									<select [(ngModel)]="set.songs[i]" [compareWith]="getComparer" class="form-control" [name]="'song[' + i + ']'">
										<option *ngFor="let c of allSongs" [ngValue]="c">{{c.name}} ({{c.durationFormatted}})</option>
									</select>
								</div>

								<div class="btn-group d-flex">
									<button [disabled]="i == 0" (click)="set.moveSong(song, -1)" type="button" class="btn flex-fill btn-outline-secondary">
										<fa-icon icon="arrow-up"></fa-icon>
									</button>
									<button [disabled]="i == (set.songs.length - 1)" (click)="set.moveSong(song, 1)" type="button" class="btn flex-fill btn-outline-secondary">
										<fa-icon icon="arrow-down"></fa-icon>
									</button>
									<button type="button" class="btn flex-fill btn-danger " (click)="set.removeSong(song) ">
										<fa-icon icon="trash"></fa-icon>
									</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</fieldset>
		</form>
	</div>
</div>

<nav class="navbar fixed-bottom navbar-dark bg-dark">
	<div class="col-md-3">
		<div class="btn-group btn-group-lg d-flex">
			<button type="button" class="btn btn-lg btn-outline-success" (click)="set.addSong(allSongs[0])">
				<fa-icon icon="plus-circle"></fa-icon>
			</button>
			<button type="submit" class="btn btn-lg btn-outline-primary" (click)="save()" [disabled]="busy">
				<fa-icon icon="save"></fa-icon>
			</button>
		</div>
	</div>
</nav>